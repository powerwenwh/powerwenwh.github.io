<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        java中的HashTable,HashMap和HashSet - undefined
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 5.4.0"></head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> sometimes code， sometimes design </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>温文焕</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#HashTable%E5%92%8CHashMap%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">HashTable和HashMap的区别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E6%80%A7%EF%BC%8C%E5%90%8C%E6%AD%A5"><span class="toc-text">线程安全性，同步</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9F%E5%BA%A6"><span class="toc-text">速度</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HashSet%E5%92%8CHashMap%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">HashSet和HashMap的区别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFHashSet%EF%BC%9F"><span class="toc-text">什么是HashSet？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HashMap%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-text">HashMap工作原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HashSet%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-text">HashSet工作原理</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> sometimes code， sometimes design </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        java中的HashTable,HashMap和HashSet
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2020-10-12 17:29:32</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#leetcode刷题" title="leetcode刷题">leetcode刷题</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <h2 id="HashTable和HashMap的区别"><a href="#HashTable和HashMap的区别" class="headerlink" title="HashTable和HashMap的区别"></a>HashTable和HashMap的区别</h2><p><code> HashMap</code>和<code>Hashtable</code>都实现了Map接口，但决定用哪一个之前先要弄清楚它们之间的分别。<strong>主要的区别有：线程安全性，同步(synchronization)，以及速度。</strong></p>
<h3 id="线程安全性，同步"><a href="#线程安全性，同步" class="headerlink" title="线程安全性，同步"></a>线程安全性，同步</h3><p><code>HashMap</code>几乎可以等价于<code>Hashtable</code>，除了<code>HashMap</code>是<strong>非synchronized的</strong>，并<strong>可以接受null</strong>(HashMap allows one null key and any number of null values.，而Hashtable则不行)。这就是说，<code>HashMap</code>中如果在表中没有发现搜索键，或者如果发现了搜索键，但它是一个空的值，那么get()将返回null。如果有必要，<em>用containKey()方法来区别这两种情况。</em></p>
<p><strong><code>HashMap</code>是非synchronized，而<code>Hashtable</code>是synchronized</strong>，这意味着<strong>Hashtable是线程安全的，多个线程可以共享一个Hashtable</strong>；而如果没有正确的同步的话，多个线程是不能共享<code>HashMap</code>的。 即是说，在多线程应用程序中，不用专门的操作就安全地可以使用<code>Hashtable</code>了；而对于<code>HashMap</code>，则需要额外的同步机制。但<code>HashMap</code>的同步问题可通过Collections的一个静态方法得到解决：<code>Map Collections.synchronizedMap(Map m)</code>这个方法返回一个同步的Map，这个Map封装了底层的<code>HashMap</code>的所有方法，使得底层的<code>HashMap</code>即使是在多线程的环境中也是安全的。</p>
<p><em>另一个区别是<code>HashMap</code>的迭代器(Iterator)是fail-fast迭代器，而Hashtable的enumerator迭代器不是fail-fast的。</em>所以当有其它线程改变了<code>HashMap</code>的结构（增加或者移除元素），将会抛出<code>ConcurrentModificationException</code>，但迭代器本身的remove()方法移除元素则不会抛出<code>ConcurrentModificationException</code>异常。但这并不是一个一定发生的行为，要看JVM。这条同样也是Enumeration和Iterator的区别。</p>
<h3 id="速度"><a href="#速度" class="headerlink" title="速度"></a>速度</h3><p>由于<code>Hashtable</code>是线程安全的也是synchronized，所以<strong>在单线程环境下它比HashMap要慢</strong>。如果你不需要同步，只需要单一线程，那么使用<code>HashMap</code>性能要好过<code>Hashtable</code>。</p>
<p><code>HashMap</code>不能保证随着时间的推移Map中的元素次序是不变的。<br>哈希值的使用不同，<code>HashTable</code>直接使用对象的hashCode，代码是这样的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> hash = key.hashCode();</span><br><span class="line"><span class="keyword">int</span> index = (hash &amp; <span class="number">0x7FFFFFFF</span>) % tab.length;</span><br></pre></td></tr></table></figure>
<p>而<code>HashMap</code>重新计算hash值，而且用与代替求模：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> hash = hash(k);</span><br><span class="line"><span class="keyword">int</span> i = indexFor(hash, table.length);</span><br></pre></td></tr></table></figure>

<p>要注意的一些重要术语：</p>
<ol>
<li><p>sychronized意味着在一次仅有一个线程能够更改<code>Hashtable</code>。就是说任何线程要更新<code>Hashtable</code>时要首先获得同步锁，其它线程要等到同步锁被释放之后才能再次获得同步锁更新<code>Hashtable</code>。</p>
</li>
<li><p>Fail-safe和iterator迭代器相关。如果某个集合对象创建了Iterator或者ListIterator，然后其它的线程试图“结构上”更改集合对象，将会抛出ConcurrentModificationException异常。但其它是假如已经从结构上进行了更改，再调用set()方法，将会抛出IllegalArgumentException异常。</p>
</li>
<li><p>结构上的更改指的是删除或者插入一个元素，这样会影响到map的结构。</p>
</li>
</ol>
<h2 id="HashSet和HashMap的区别"><a href="#HashSet和HashMap的区别" class="headerlink" title="HashSet和HashMap的区别"></a>HashSet和HashMap的区别</h2><h3 id="什么是HashSet？"><a href="#什么是HashSet？" class="headerlink" title="什么是HashSet？"></a>什么是HashSet？</h3><p>HashSet实现了Set接口，<strong>它不允许集合中有重复的值</strong>，当我们提到HashSet时，第一件事情就是在将对象存储在HashSet之前，要先确保对象重写equals()和hashCode()方法，这样才能比较对象的值是否相等，以确保set中没有储存相等的对象。如果我们没有重写这两个方法，将会使用这个方法的默认实现。详见《探索equals()和hashCode()方法》。</p>
<p>public boolean add(Object o)方法用来在Set中添加元素，当元素值重复时则会立即返回false，如果成功添加的话会返回true。</p>
<p><strong>什么是HashMap？</strong><br>HashMap实现了Map接口，Map接口对键值对进行映射。<strong>Map中不允许重复的键</strong>。Map接口有两个基本的实现，HashMap和TreeMap。TreeMap保存了对象的排列次序，而HashMap则不能。HashMap允许键和值为null。HashMap是非synchronized的，但collection框架提供方法能保证HashMap synchronized，这样多个线程同时访问HashMap时，能保证只有一个线程更改Map。</p>
<p><code>public Object put(Object Key,Object value)</code>方法用来将元素添加到map中。</p>
<p><strong>HashSet和HashMap的区别</strong><br>HashMap | HashSet<br>—|—<br>HashMap实现了Map接口 |HashSet实现了Set接口<br>HashMap储存键值对 |HashSet仅仅存储对象（且无重复对象）<br>使用put()方法将元素放入map中|使用add()方法将元素放入set中<br>HashMap中使用键对象来计算hashcode值|HashSet使用成员对象来计算hashcode值，对于两个对象来说hashcode可能相同，所以equals()方法用来判断对象的相等性，如果两个对象不同的话，那么返回false<br>HashMap比较快，因为是使用唯一的键来获取对象    |HashSet较HashMap来说比较慢</p>
<h2 id="HashMap工作原理"><a href="#HashMap工作原理" class="headerlink" title="HashMap工作原理"></a>HashMap工作原理</h2><p>待补充</p>
<h2 id="HashSet工作原理"><a href="#HashSet工作原理" class="headerlink" title="HashSet工作原理"></a>HashSet工作原理</h2><p>待补充</p>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/speedme/article/details/22485681">https://blog.csdn.net/speedme/article/details/22485681</a></p>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        
        <li>
            <a target="_blank" href="http://weibo.com/2809403392">
                            <span class="fa-stack fa-lg">
                                  <i class="iconfont icon-weibo"></i>
                            </span>
            </a>
        </li>
        

        

        
        <li>
            <a target="_blank"  href="https://github.com/powerwenwh">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a target="_blank" rel="noopener" href="https://github.com/">github</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
