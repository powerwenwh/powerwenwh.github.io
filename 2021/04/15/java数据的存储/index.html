<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        Java数据的存储 - undefined
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 5.4.0"></head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> sometimes code， sometimes design </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>温文焕</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#java%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8"><span class="toc-text">java数据的存储</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-0%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E5%A0%86-stack-%E4%B8%8E%E6%A0%88-heap"><span class="toc-text">1.0内存中的堆(stack)与栈(heap)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-0-Java%E4%B8%AD%E6%95%B0%E6%8D%AE%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E5%AD%98%E5%82%A8"><span class="toc-text">2.0 Java中数据在内存中的存储</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AD%98%E5%82%A8"><span class="toc-text">2.1基本数据类型的存储</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B"><span class="toc-text">2.2对象的内存模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%A3%B0%E6%98%8E%E5%AF%B9%E8%B1%A1%E6%97%B6%E7%9A%84%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B"><span class="toc-text">(1)声明对象时的内存模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%AF%B9%E8%B1%A1%E5%AE%9E%E4%BE%8B%E5%8C%96%E6%97%B6%E7%9A%84%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B"><span class="toc-text">(2)对象实例化时的内存模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BA%E5%A4%9A%E4%B8%AA%E4%B8%8D%E5%90%8C%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%AE%9E%E4%BE%8B"><span class="toc-text">(3)创建多个不同的对象实例</span></a></li></ol></li></ol></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> sometimes code， sometimes design </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Java数据的存储
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2021-04-15 21:41:48</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#Java" title="Java">Java</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <h1 id="java数据的存储"><a href="#java数据的存储" class="headerlink" title="java数据的存储"></a>java数据的存储</h1><p>弄清楚Java中数据的存储方式很重要，由int和Integer的存储区别引起的思考。</p>
<h2 id="1-0内存中的堆-stack-与栈-heap"><a href="#1-0内存中的堆-stack-与栈-heap" class="headerlink" title="1.0内存中的堆(stack)与栈(heap)"></a>1.0内存中的堆(stack)与栈(heap)</h2><p>Java程序运行时有6个地方可以存储数据，它们分别是寄存器、栈、堆、静态存储、常量存储和非RAM存储，主要是堆与栈的存储。</p>
<blockquote>
<p>栈与堆都是Java用来在RAM中存放数据的地方。与C++不同，<strong>Java自动管理栈和堆，程序员不能直接地设置栈或堆。</strong>栈的优势是，存取速度比堆要快，仅次于直接位于CPU中的寄存器。另外，栈数据可以共享。但缺点是，存在栈中的数据大小与生存期必须是确定的，缺乏灵活性。堆的优势是可以动态地分配内存大小，生存期也不必事先告诉编译器，Java的垃圾收集器会自动收走这些不再使用的数据。但缺点是，由于要在运行时动态分配内存，存取速度较慢。</p>
</blockquote>
<ol>
<li>栈存储速度快，数据可以共享，但缺乏灵活性。</li>
<li>堆可以动态分配内存大小，但速度慢。</li>
</ol>
<h2 id="2-0-Java中数据在内存中的存储"><a href="#2-0-Java中数据在内存中的存储" class="headerlink" title="2.0 Java中数据在内存中的存储"></a>2.0 Java中数据在内存中的存储</h2><h3 id="2-1基本数据类型的存储"><a href="#2-1基本数据类型的存储" class="headerlink" title="2.1基本数据类型的存储"></a>2.1基本数据类型的存储</h3><blockquote>
<p>Java的基本数据类型共有8种，即int, short, long, byte, float, double, boolean, char(不包括string)。通过如int a = 3的形式来定义，称为<strong>自动变量</strong>。值得注意的是：自动变量<strong>存的是字面值，不是类的实例</strong>，即<strong>不是类的引用</strong>，这里并没有类的存在。如int a = 3；这里的<strong>a是一个指向int类型的引用，指向3这个字面值</strong>。这些字面值的数据，由于<strong>大小可知，生存期可知</strong>(这些字面值固定定义在某个程序块里面，程序块退出后，字段值就消失了)，出于追求速度的原因，就存在于栈中。<br>另外，栈有一个很重要的特殊性，就是存在栈中的数据可以共享。   假设我们同时定义：<br> <u>int a = 3；   int b=3<br> 编译器先处理int a = 3；首先它会在栈中创建一个变量为a的引用，然后查找有没有字面值为3的地址，没找到，就开辟一个存放3这个字面值的地址，然后将a指向3的地址。接着处理int b = 3；在创建完b这个引用变量后，由于在栈中已经有3这个字面值，便将b直接指向3的地址。这样，就出现了a与b同时均指向3的情况</u>。【上文提到了”引用+数值+内存地址”这三个名词,其中变量名就是引用，给变量赋的值就是数值，而所提到的内存是抽象的内容，让引用指向的不是数值，而是存取数值的那块内存地址】</p>
</blockquote>
<blockquote>
<p>定义完a与b的值后，再令a = 4；那么，b不会等于4，还是等于3。在编译器内部，遇到时，它就<u>会重新搜索栈中是否有4的字面值，如果没有，重新开辟地址存放4的值</u>；如果已经有了，则直接将a指向这个地址。因此a值的改变不会影响到b的值。</p>
</blockquote>
<h3 id="2-2对象的内存模型"><a href="#2-2对象的内存模型" class="headerlink" title="2.2对象的内存模型"></a>2.2对象的内存模型</h3><p>在Java中，创建一个对象包括对象的声明和实例化两步，下面用一个例题来说明对象的内存模型。<br> 假设有类Rectangle定义如下：   【Rectangle：矩形】</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> width,height；</span><br><span class="line">	Rectangle(<span class="keyword">double</span> w,<span class="keyword">double</span> h)&#123;</span><br><span class="line">	 width=w；height=h； </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-声明对象时的内存模型"><a href="#1-声明对象时的内存模型" class="headerlink" title="(1)声明对象时的内存模型"></a>(1)声明对象时的内存模型</h4><p>用Rectangle rect声明一个对象rect时，将在栈内存为对象的引用变量rect分配内存空间，但Rectangle的值为空，称rect是一个空对象。空对象不能使用，因为它还没有引用任何“实体”。</p>
<h4 id="2-对象实例化时的内存模型"><a href="#2-对象实例化时的内存模型" class="headerlink" title="(2)对象实例化时的内存模型"></a>(2)对象实例化时的内存模型</h4><p>当执行rect=new Rectangle(3,5)；时，会做两件事：<br>在堆内存中为类的成员变量width,height分配内存，并将其初始化为各数据类型的默认值；接着进行显式初始化（类定义时的初始化值）；最后调用构造方法，为成员变量赋值。<br> 返回堆内存中对象的引用（相当于首地址）给引用变量rect,以后就可以通过rect来引用堆内存中的对象了。</p>
<h4 id="3-创建多个不同的对象实例"><a href="#3-创建多个不同的对象实例" class="headerlink" title="(3)创建多个不同的对象实例"></a>(3)创建多个不同的对象实例</h4><p> 一个类通过使用new运算符可以创建多个不同的对象实例，这些对象实例将在堆中被分配不同的内存空间，改变其中一个对象的状态不会影响其他对象的状态。例如：<br> Rectangle r1=new Rectangle(3,5)；<br> Rectangle r2=new Rectangle(4,6)；<br> 此时，将在堆内存中分别为两个对象的成员变量width、height分配内存空间，两个对象在堆内存中占据的空间是互不相同的。如果有<br> Rectangle r1=new Rectangle(3,5)；<br> Rectangle r2=r1；<br> 则在堆内存中只创建了一个对象实例，在栈内存中创建了两个对象引用，两个对象引用同时指向一个对象实例。<br>3.3包装类数据的存储<br>基本型别都有对应的包装类：如int对应Integer类，double对应Double类等，基本类型的定义都是直接在栈中，如果用包装类来创建对象，就和普通对象一样了。例如：int i=0；i直接存储在栈中。  Integeri（i此时是对象）= new Integer(5)；这样，i对象数据存储在堆中，i的引用存储在栈中，通过栈中的引用来操作对象。【数据存储在堆中，引用存储在栈中】</p>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        
        <li>
            <a target="_blank" href="http://weibo.com/2809403392">
                            <span class="fa-stack fa-lg">
                                  <i class="iconfont icon-weibo"></i>
                            </span>
            </a>
        </li>
        

        

        
        <li>
            <a target="_blank"  href="https://github.com/powerwenwh">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a target="_blank" rel="noopener" href="https://github.com/">github</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
